{% sw_extends '@Storefront/storefront/layout/meta.html.twig' %}

{% block layout_head_title %}
    {# Detect auth pages and set German titles using URL path #}
    {% set currentPath = app.request.pathInfo %}
    {% if '/account/login' in currentPath %}
        {% set pageTitle = 'Anmelden | Raven Weapon AG' %}
    {% elseif '/account/register' in currentPath %}
        {% set pageTitle = 'Registrieren | Raven Weapon AG' %}
    {% elseif customPageTitle is defined and customPageTitle %}
        {% set pageTitle = customPageTitle %}
    {% elseif page.metaInformation.metaTitle %}
        {% set pageTitle = page.metaInformation.metaTitle %}
    {% else %}
        {% set pageTitle = 'Raven Weapon AG | Waffen, Munition & Ausrüstung | Schweiz' %}
    {% endif %}
    <title itemprop="name">{{ pageTitle }}</title>
{% endblock %}

{% block layout_head_favicon %}
    <link rel="icon" type="image/png" sizes="32x32" href="{{ asset('bundles/raventheme/assets/favicon.png') }}">
    <link rel="shortcut icon" type="image/png" href="{{ asset('bundles/raventheme/assets/favicon.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ asset('bundles/raventheme/assets/favicon.png') }}">
{% endblock %}

{% block layout_head_meta_tags_image_og %}{{ app.request.schemeAndHttpHost }}/bundles/raventheme/assets/raven-logo.png{% endblock %}

{% block layout_head_meta_tags_image_twitter %}{{ app.request.schemeAndHttpHost }}/bundles/raventheme/assets/raven-logo.png{% endblock %}

{% block layout_head_meta_tags_general %}
    {{ parent() }}
    <meta name="google-site-verification" content="google527d5de54db2847e">
    {% if page.metaInformation.metaDescription is not defined or page.metaInformation.metaDescription is empty %}
        {% if page.cmsPage is defined and page.cmsPage %}
            <meta name="description" content="Raven Weapon AG - Ihr Schweizer Waffenhändler. Waffen, Munition, Zielfernrohre, Red Dots & Zubehör online kaufen. Schnelle Lieferung in der Schweiz.">
        {% endif %}
    {% endif %}
{% endblock %}

{% block layout_head_javascript_prod %}
    {{ parent() }}
    {# RavenTheme plugins are compiled into storefront.js automatically #}
{% endblock %}

{% block layout_head_stylesheet %}
    {# PRELOAD LCP HERO IMAGE - Start download before CSS parsing for faster LCP #}
    <link rel="preload" as="image" href="{{ asset('bundles/raventheme/assets/hero-background.jpg') }}" fetchpriority="high">

    {# Preconnect to Google Fonts - establishes early connection #}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    {# PRELOAD Google Fonts CSS - Critical for mobile LCP (H1 uses Chakra Petch) #}
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Chakra+Petch:wght@400;500;600;700&display=swap">

    {# NON-RENDER-BLOCKING Google Fonts - Uses print/onload pattern #}
    {# This loads fonts asynchronously so they don't block first render #}
    <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Chakra+Petch:wght@400;500;600;700&display=swap"
        media="print"
        onload="this.media='all'"
    >
    <noscript>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Chakra+Petch:wght@400;500;600;700&display=swap">
    </noscript>

    {{ parent() }}
{% endblock %}
