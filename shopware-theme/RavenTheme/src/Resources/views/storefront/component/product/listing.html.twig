{% sw_extends '@Storefront/storefront/component/product/listing.html.twig' %}

{# Hide dark CMS "coming soon" blocks - we use our clean version instead #}
{% block element_product_listing_wrapper_content %}
<script>
(function() {
    function hideDarkComingSoon() {
        // Find and hide any dark CMS "coming soon" blocks
        document.querySelectorAll('.cms-block, .cms-element-text, .cms-section > div').forEach(function(el) {
            // Check if element contains "SOON" or "Bald verfügbar" text
            var text = el.textContent || '';
            if ((text.indexOf('SOON') !== -1 || text.indexOf('Bald verfügbar') !== -1) &&
                el.querySelector('[style*="background"]')) {
                // Check for dark background
                var darkDiv = el.querySelector('div[style*="background"]');
                if (darkDiv) {
                    var style = darkDiv.getAttribute('style') || '';
                    // Hide if it has dark background colors
                    if (style.indexOf('#2') !== -1 || style.indexOf('#3') !== -1 ||
                        style.indexOf('rgb(3') !== -1 || style.indexOf('rgb(4') !== -1 ||
                        style.indexOf('rgb(2') !== -1) {
                        el.style.display = 'none';
                    }
                }
            }
        });

        // Also target by content
        document.querySelectorAll('*').forEach(function(el) {
            if (el.textContent && el.textContent.trim() === 'SOON') {
                var parent = el.closest('.cms-block, .cms-section');
                if (parent) parent.style.display = 'none';
            }
        });
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', hideDarkComingSoon);
    } else {
        hideDarkComingSoon();
    }
    setTimeout(hideDarkComingSoon, 100);
    setTimeout(hideDarkComingSoon, 500);
})();
</script>
{{ parent() }}
{% endblock %}

{% block element_product_listing_col_empty %}
    <div class="cms-listing-col col-12">
        {% block element_product_listing_col_empty_custom %}
            {# Clean, simple "Coming Soon" message #}
            <div style="text-align: center; padding: 4rem 2rem; max-width: 480px; margin: 0 auto;">
                {# Simple arrow icon #}
                <div style="margin-bottom: 1.5rem;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#D4A847" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 6 12 12 16 14"/>
                    </svg>
                </div>

                {# Title #}
                <h2 style="font-family: 'Inter', -apple-system, sans-serif; font-size: 1.5rem; font-weight: 600; color: #111; margin: 0 0 0.75rem;">
                    Bald verfügbar
                </h2>

                {# Description #}
                <p style="font-size: 1rem; color: #666; line-height: 1.6; margin: 0 0 2rem;">
                    Neue Produkte werden in Kürze hinzugefügt. Schauen Sie bald wieder vorbei oder kontaktieren Sie uns für weitere Informationen.
                </p>

                {# CTA Button #}
                <a href="{{ path('frontend.cms.page', { id: 'contact' }) }}"
                   style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: #D4A847; color: #111; font-weight: 600; border-radius: 6px; text-decoration: none; transition: background 0.2s;">
                    Kontaktieren Sie uns
                </a>
            </div>
        {% endblock %}
    </div>
{% endblock %}
