<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Kasse - RAVEN WEAPON AG</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;600;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Inter","ui-sans-serif","system-ui"],
              heading: ["Chakra Petch","ui-sans-serif","system-ui"],
            },
            colors: {
              brand: {
                gold1: "#FDE68A",
                gold2: "#FBBF24",
                gold3: "#F59E0B",
              }
            },
          },
          container: { center: true, padding: { DEFAULT:"1rem", lg:"2rem", xl:"2.5rem" } },
        },
      };
    </script>

    <style>
      .form-input{
        padding:.75rem 1rem;border:1px solid #E5E7EB;border-radius:.5rem;background:#fff;outline:0;
        transition:border-color .2s, box-shadow .2s
      }
      .form-input:focus{border-color:#F59E0B;box-shadow:0 0 0 3px rgba(245,158,11,.15)}
      .section-title{font-family:'Chakra Petch', ui-sans-serif, system-ui}

      .radio-row{
        border:1.5px solid #E5E7EB;border-radius:.75rem;padding:.9rem 1rem;display:flex;align-items:center;gap:.75rem;
        cursor:pointer;transition:border-color .2s, background .2s
      }
      .radio-row input[type="radio"]{accent-color:#F59E0B}
      .radio-row.active input[type="radio"]{accent-color:#1f2937}
      .radio-row:hover{border-color:#F59E0B}
      .radio-row.active{border-color:#F59E0B;background:rgba(245, 158, 11, 0.15);color:#1f2937}
      .radio-row.active *{color:#1f2937}

      /* Payment method details animation */
      .payment-method [id$="-details"], .payment-method [id$="-note"] {
        transition: all 0.3s ease-in-out;
        opacity: 0;
        transform: translateY(-10px);
        max-height: 0;
        overflow: hidden;
      }

      .payment-method [id$="-details"]:not(.hidden), .payment-method [id$="-note"]:not(.hidden) {
        opacity: 1;
        transform: translateY(0);
        max-height: 1000px;
      }

      /* GOLD primary button */
      .btn-primary{
        background:linear-gradient(to top, #F2B90D 12%, #F6CE55 88%);
        color:#111827;font-weight:700;border:1px solid #C59A0F;border-radius:.75rem;padding:1rem 1.25rem;
        box-shadow:0 2px 6px rgba(0,0,0,0.25);font-family:'Inter', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans';
        transition:all 0.2s ease-in-out;
        position:relative;
        overflow:hidden;
      }
      .btn-primary:hover{
        box-shadow:0 4px 10px rgba(0,0,0,0.35);
        transform:translateY(-1px);
      }
      .btn-primary:active{transform:translateY(0)}
      .btn-primary::before{
        content:'';position:absolute;top:0;left:0;right:0;bottom:0;
        background:linear-gradient(180deg, rgba(255,255,255,0.55) 0%, rgba(255,255,255,0.25) 35%, rgba(255,255,255,0.00) 60%);
        pointer-events:none;
      }
      .btn-secondary{border:1px solid #E5E7EB;border-radius:.5rem;padding:.65rem .9rem;font-weight:600}

      /* divider between columns */
      @media (min-width:1024px){ .v-divider{border-left:1px solid #e5e7eb} }

      /* quantity badge OUTSIDE the thumbnail */
      .qty-wrap{position:relative;display:inline-block}
      .qty-badge{
        position:absolute;top:-10px;left:-10px;transform:translate(-25%,-25%);
        background:#111827;color:#fff;border-radius:9999px;
        font-size:.75rem;line-height:1rem;width:22px;height:22px;display:flex;align-items:center;justify-content:center;
        font-weight:700;box-shadow:0 0 0 2px #fff;
      }
    </style>
  </head>

  <body class="bg-gray-50 text-gray-900 antialiased font-sans">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200">
      <div class="max-w-7xl mx-auto px-6 lg:px-24 py-4">
        <div class="flex items-center justify-between">
          <a href="index.html" class="inline-flex items-center h-10">
            <div class="bg-left bg-no-repeat h-10 w-[182px]"
                 style="background-image:url('assets/raven-logo-bold (1)-stroke-and-fill.svg');background-size:100% 455%"></div>
          </a>
          <a href="index.html" class="text-sm text-gray-600 hover:text-gray-900">
            <i class="fa-solid fa-arrow-left mr-1"></i> Zurück zum Shop
          </a>
        </div>
      </div>
    </header>

    <!-- Main -->
    <div class="max-w-7xl mx-auto px-6 lg:px-24 py-8 md:py-12">
      <h1 class="section-title text-3xl md:text-4xl font-bold mb-6">Kasse</h1>

      <div class="grid grid-cols-1 lg:grid-cols-[minmax(0,1fr)_minmax(340px,420px)] gap-10">
        <!-- LEFT -->
        <div>
          <!-- email + opt-in -->
          <div class="flex items-center gap-3 mb-4">
            <div class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-sm font-semibold text-gray-700">JA</div>
            <div class="text-sm text-gray-800">alamajacint@gmail.com</div>
            <i class="fa-solid fa-ellipsis-vertical text-gray-400 ml-auto"></i>
          </div>
          <label class="inline-flex items-center gap-2 text-sm text-gray-700 mb-6">
            <input type="checkbox" class="w-4 h-4 rounded border-gray-300">
            Neuigkeiten und Angebote via E-Mail erhalten
          </label>

          <!-- Lieferung -->
          <h2 class="section-title text-xl font-bold mb-3">Lieferung</h2>
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Land / Region</label>
              <select class="form-input w-full">
                <option>Schweiz</option><option>Deutschland</option><option>Österreich</option><option>Liechtenstein</option>
              </select>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Vorname</label>
                <input class="form-input w-full" placeholder="Jacint">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Nachname</label>
                <input class="form-input w-full" placeholder="Alama">
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Firma (optional)</label>
              <input class="form-input w-full" placeholder="Firma">
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Adresse</label>
              <div class="relative">
                <input class="form-input w-full pr-10" placeholder="Straße & Nr.">
                <i class="fa-solid fa-magnifying-glass text-gray-400 absolute right-3 top-1/2 -translate-y-1/2"></i>
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Postleitzahl</label>
                <input class="form-input w-full" placeholder="8000">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Stadt</label>
                <input class="form-input w-full" placeholder="Zürich">
              </div>
            </div>

            <a class="text-sm text-yellow-600 hover:underline" href="#" style="color: #F59E0B;">Eine gespeicherte Adresse verwenden</a>
          </div>

          <div class="h-px bg-gray-200 my-6"></div>

          <!-- Versand hint -->
          <h3 class="section-title text-base font-semibold mb-2">Versand</h3>
          <div class="rounded-md bg-gray-100 text-gray-700 text-sm px-4 py-3 mb-6">
            Gib deine Lieferadresse ein, um verfügbare Versandarten anzuzeigen.
          </div>

          <div class="h-px bg-gray-200 my-6"></div>

          <!-- Zahlung -->
          <h2 class="section-title text-xl font-bold mb-1">Zahlung</h2>
          <p class="text-sm text-gray-600 mb-3">Alle Transaktionen sind sicher und verschlüsselt.</p>

          <div id="payment-list" class="space-y-0 overflow-hidden rounded-xl border border-gray-200">
            <div class="payment-method">
              <label class="radio-row active rounded-none rounded-t-xl" data-row>
                <input type="radio" name="payment" value="rechnung" checked>
                <span class="font-medium">Rechnung</span>
              </label>
              <div id="invoice-note" class="text-sm text-gray-700 bg-gray-50 border-t border-b border-gray-200 px-4 py-3">
                Zahlungsfrist 30 Tage
              </div>
            </div>

            <div class="payment-method">
              <label class="radio-row rounded-none" data-row>
                <input type="radio" name="payment" value="twint">
                <span class="font-medium">TWINT</span>
                <img src="https://www.sparkasse.ch/bilder/twint/twint_logo_quer_pos_rgb.png" alt="TWINT" class="h-4 ml-auto">
              </label>
              <div id="twint-details" class="hidden bg-gray-50 border border-gray-200 rounded-lg p-4 mx-4 mb-3">
                <div class="bg-white border border-gray-200 rounded-md p-4 text-center">
                  <div class="text-gray-600 mb-2">
                    <i class="fa-solid fa-mobile-screen-button text-2xl text-gray-400 mb-2"></i>
                  </div>
                  <p class="text-sm text-gray-700">
                    Nachdem du "Jetzt kaufen" geklickt hast, wirst du zu<br>
                    TWINT weitergeleitet, um deinen Einkauf<br>
                    sicher abzuschließen.
                  </p>
                </div>
              </div>
            </div>

            <div class="payment-method">
              <label class="radio-row rounded-none" data-row>
                <input type="radio" name="payment" value="postfinance">
                <span class="font-medium">PostFinance Card</span>
                <img src="https://www.postfinance.ch/content/dam/pfch/image/icon/postfinancecard_coba_chf.png/_jcr_content/renditions/original./postfinancecard_coba_chf.png" alt="PostFinance" class="h-6 ml-auto">
              </label>
              <div id="postfinance-details" class="hidden bg-gray-50 border border-gray-200 rounded-lg p-4 mx-4 mb-3">
                <div class="bg-white border border-gray-200 rounded-md p-4 text-center">
                  <div class="text-gray-600 mb-2">
                    <i class="fa-solid fa-window-maximize text-2xl text-gray-400 mb-2"></i>
                  </div>
                  <p class="text-sm text-gray-700">
                    Nachdem du "Jetzt kaufen" geklickt hast, wirst du zu<br>
                    PostFinance Card weitergeleitet, um deinen Einkauf<br>
                    sicher abzuschließen.
                  </p>
                </div>
              </div>
            </div>

            <div class="payment-method">
              <label class="radio-row rounded-none" data-row>
                <input type="radio" name="payment" value="kreditkarte">
                <span class="font-medium">Kreditkarte</span>
                <span class="ml-auto flex items-center gap-2">
                  <i class="fa-brands fa-cc-visa text-gray-600"></i>
                  <i class="fa-brands fa-cc-mastercard text-gray-600"></i>
                </span>
              </label>
              <div id="creditcard-details" class="hidden bg-gray-50 border border-gray-200 rounded-lg p-4 mx-4 mb-3">
                <h3 class="font-medium text-gray-900 mb-4">Kreditkarteninformationen</h3>

                <div class="space-y-4">
                  <!-- Card Number -->
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Kartennummer</label>
                    <div class="relative">
                      <input type="text" class="form-input w-full pr-10" placeholder="1234 5678 9012 3456" maxlength="19">
                      <i class="fa-solid fa-lock text-gray-400 absolute right-3 top-1/2 -translate-y-1/2"></i>
                    </div>
                  </div>

                  <div class="grid grid-cols-2 gap-4">
                    <!-- Expiry Date -->
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-1">Gültig bis (MM/JJ)</label>
                      <input type="text" class="form-input w-full" placeholder="MM/JJ" maxlength="5">
                    </div>

                    <!-- Security Code -->
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-1">
                        Sicherheitscode
                        <i class="fa-solid fa-question-circle text-gray-400 ml-1" title="Die letzten 3 Ziffern auf der Rückseite Ihrer Karte"></i>
                      </label>
                      <input type="text" class="form-input w-full" placeholder="123" maxlength="4">
                    </div>
                  </div>

                  <!-- Cardholder Name -->
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Name des Karteninhabers</label>
                    <input type="text" class="form-input w-full" placeholder="Vorname Nachname">
                  </div>

                  <!-- Checkbox -->
                  <div class="flex items-start gap-2 pt-2">
                    <input type="checkbox" id="use-delivery-address" class="w-4 h-4 mt-0.5 rounded border-gray-300">
                    <label for="use-delivery-address" class="text-sm text-gray-700">
                      Lieferadresse als Rechnungsadresse verwenden
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <div class="payment-method">
              <label class="radio-row rounded-none rounded-b-xl" data-row>
                <input type="radio" name="payment" value="paypal">
                <span class="font-medium">PayPal</span>
                <i class="fa-brands fa-paypal text-[#003087] ml-auto"></i>
              </label>
              <div id="paypal-details" class="hidden bg-gray-50 border border-gray-200 rounded-lg p-4 mx-4 mb-3">
                <div class="bg-white border border-gray-200 rounded-md p-4 text-center">
                  <div class="text-gray-600 mb-2">
                    <i class="fa-brands fa-paypal text-3xl text-[#003087] mb-2"></i>
                  </div>
                  <p class="text-sm text-gray-700">
                    Nachdem du "Jetzt kaufen" geklickt hast, wirst du zu<br>
                    PayPal weitergeleitet, um deinen Einkauf<br>
                    sicher abzuschließen.
                  </p>
                </div>
              </div>
            </div>
          </div>


          <div class="h-px bg-gray-200 my-6"></div>

          <!-- Rechnungsadresse -->
          <h2 class="section-title text-xl font-bold mb-3">Rechnungsadresse</h2>
          <div class="space-y-0 overflow-hidden rounded-xl border border-gray-200">
            <label class="radio-row active rounded-none rounded-t-xl" id="bill-same">
              <input type="radio" name="billing" value="same" checked>
              <span class="font-medium">Mit der Lieferadresse identisch</span>
            </label>
            <label class="radio-row rounded-none rounded-b-xl" id="bill-diff">
              <input type="radio" name="billing" value="different">
              <span class="font-medium">Eine andere Rechnungsadresse verwenden</span>
            </label>
          </div>

          <!-- Hidden billing fields -->
          <div id="billing-fields" class="mt-4 hidden space-y-4">
            <!-- Saved Addresses Dropdown -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Gespeicherte Adressen</label>
              <select class="form-input w-full">
                <option>Schweiz (Jacint Alama)</option>
                <option>Deutschland (Jacint Alama)</option>
                <option>Österreich (Jacint Alama)</option>
              </select>
            </div>

            <!-- Country/Region Dropdown -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Land / Region</label>
              <select class="form-input w-full">
                <option>Schweiz</option>
                <option>Deutschland</option>
                <option>Österreich</option>
                <option>Liechtenstein</option>
              </select>
            </div>

            <!-- First Name and Last Name -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Vorname</label>
                <input class="form-input w-full" value="Jacint">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Nachname</label>
                <input class="form-input w-full" value="Alama">
              </div>
            </div>

            <!-- Company (Optional) -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Firma (optional)</label>
              <input class="form-input w-full" placeholder="Firma">
            </div>

            <!-- Address with Search Icon -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Adresse</label>
              <div class="relative">
                <input class="form-input w-full pr-10" placeholder="Straße & Nr.">
                <i class="fa-solid fa-magnifying-glass text-gray-400 absolute right-3 top-1/2 -translate-y-1/2"></i>
              </div>
            </div>

            <!-- Postal Code and City -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Postleitzahl</label>
                <input class="form-input w-full" placeholder="8000">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Stadt</label>
                <input class="form-input w-full" placeholder="Zürich">
              </div>
            </div>
          </div>
        </div>

        <!-- RIGHT (sticky) -->
        <aside class="v-divider lg:pl-8">
          <div class="lg:sticky lg:top-6">
            <!-- Product line -->
            <div class="flex items-start gap-3 mb-4">
              <div class="qty-wrap">
                <span id="qty-badge" class="qty-badge">1</span>
                <div class="w-16 h-16 bg-white border border-gray-200 rounded-md overflow-hidden flex items-center justify-center">
                  <img id="thumb-0" src="assets/placeholder.png" class="max-w-full max-h-full object-contain p-1" alt="">
                </div>
              </div>
              <div class="flex-1 min-w-0">
                <div class="text-sm font-medium text-gray-900 truncate" id="item-name">Lockhart Tactical .223 RAVEN</div>
                <div class="text-xs text-gray-500">30g · Neutral</div>
              </div>
              <div class="text-sm font-medium" id="item-price">CHF 2985.00</div>
            </div>

            <!-- Coupon -->
            <div class="flex gap-2 mb-6">
              <input id="coupon" type="text" class="form-input flex-1" placeholder="Rabattcode oder Gutschein" />
              <button id="apply-coupon" class="btn-secondary">Anwenden</button>
            </div>

            <!-- Totals -->
            <div class="space-y-2 text-sm mb-2">
              <div class="flex justify-between text-gray-700">
                <span>Zwischensumme</span><span id="subtotal">CHF 0.00</span>
              </div>
              <div class="flex justify-between text-gray-700">
                <span>Versand</span><span id="shipping">Lieferadresse eingeben</span>
              </div>
              <div class="flex justify-between text-gray-800 font-semibold">
                <span>Gesamt</span><span id="total">CHF 0.00</span>
              </div>
              <div class="text-xs text-gray-500">inkl. CHF <span id="vat">0.00</span> MwSt</div>
            </div>

            <!-- GOLD BUTTON -->
            <button id="buy" class="btn-primary w-full mt-4" aria-label="Kaufen">Kaufen</button>

            <!-- links under the button -->
            <div class="mt-6 text-xs text-gray-600 flex flex-wrap gap-x-4 gap-y-2">
              <a href="#" class="hover:underline">Widerrufsrecht</a>
              <a href="#" class="hover:underline">Versand</a>
              <a href="#" class="hover:underline">Datenschutzerklärung</a>
              <a href="#" class="hover:underline">AGB</a>
              <a href="#" class="hover:underline">Impressum</a>
              <a href="#" class="hover:underline">Kontakt</a>
            </div>
          </div>
        </aside>
      </div>
    </div>

    <!-- Footer -->
    <footer class="mt-12 border-t border-gray-200 bg-white py-8">
      <div class="max-w-7xl mx-auto px-6 lg:px-24">
        <div class="text-center text-sm text-gray-500">
          © 2025 RAVEN WEAPON AG. Alle Rechte vorbehalten.
        </div>
      </div>
    </footer>

    <!-- Cart / page logic -->
    <script src="cart.js"></script>
    <script>
      // payment tile active + details toggle
      const paymentRows = document.querySelectorAll('[data-row]');

      paymentRows.forEach(row=>{
        const input=row.querySelector('input[type="radio"]');
        const paymentMethod = row.closest('.payment-method');
        const detailsSection = paymentMethod.querySelector('[id$="-details"], [id$="-note"]');

        input.addEventListener('change',()=>{
          paymentRows.forEach(r=>r.classList.remove('active'));
          row.classList.add('active');

          // Hide all payment details first
          document.querySelectorAll('.payment-method [id$="-details"], .payment-method [id$="-note"]').forEach(el => {
            el.classList.add('hidden');
          });

          // Show relevant details for selected payment method
          if (detailsSection) {
            detailsSection.classList.remove('hidden');
          }
        });
      });

      // billing toggle
      const same=document.getElementById('bill-same');
      const diff=document.getElementById('bill-diff');
      const billingFields=document.getElementById('billing-fields');
      same.addEventListener('click',()=>{billingFields.classList.add('hidden');same.classList.add('active');diff.classList.remove('active');});
      diff.addEventListener('click',()=>{billingFields.classList.remove('hidden');diff.classList.add('active');same.classList.remove('active');});

      // Credit card input formatting
      function formatCreditCardInput(input) {
        let value = input.value.replace(/\s/g, '');
        let formatted = '';
        for (let i = 0; i < value.length && i < 16; i++) {
          if (i > 0 && i % 4 === 0) formatted += ' ';
          formatted += value[i];
        }
        input.value = formatted;
      }

      function formatExpiryInput(input) {
        let value = input.value.replace(/\D/g, '');
        if (value.length >= 2) {
          value = value.substring(0, 2) + '/' + value.substring(2, 4);
        }
        input.value = value;
      }

      // Add event listeners for credit card formatting
      function addCreditCardFormatting() {
        const cardNumberInput = document.querySelector('input[placeholder="1234 5678 9012 3456"]');
        const expiryInput = document.querySelector('input[placeholder="MM/JJ"]');

        if (cardNumberInput) {
          cardNumberInput.addEventListener('input', function() {
            formatCreditCardInput(this);
          });
        }

        if (expiryInput) {
          expiryInput.addEventListener('input', function() {
            formatExpiryInput(this);
          });
        }
      }

      // Initialize formatting on page load and when payment method changes
      addCreditCardFormatting();

      // load summary from cart (fallback demo)
      function loadSummary() {
        let subtotal=0, firstItem=null;
        if (window.cart && cart.items && cart.items.length) {
          firstItem = cart.items[0];
          subtotal = cart.getTotal();
        } else {
          firstItem = { name:'Lockhart Tactical .223 RAVEN', image:'assets/placeholder.png', price:2985.00, quantity:1 };
          subtotal = 2985.00;
        }

        // fill item
        document.getElementById('item-name').textContent = firstItem.name || 'Produkt';
        document.getElementById('thumb-0').src = firstItem.image || 'assets/placeholder.png';
        document.getElementById('item-price').textContent = `CHF ${(firstItem.price * (firstItem.quantity||1)).toFixed(2)}`;
        document.getElementById('qty-badge').textContent = firstItem.quantity || 1;

        // totals
        const freeShippingThreshold = 100;
        const shipping = subtotal >= freeShippingThreshold ? 0 : 9.90;
        const vat = (subtotal + shipping) * 0.06; // display only
        const total = subtotal + shipping;

        document.getElementById('subtotal').textContent = `CHF ${subtotal.toFixed(2)}`;
        document.getElementById('shipping').textContent = subtotal === 0 ? 'Lieferadresse eingeben' : (shipping === 0 ? 'Kostenlos' : `CHF ${shipping.toFixed(2)}`);
        document.getElementById('total').textContent = `CHF ${total.toFixed(2)}`;
        document.getElementById('vat').textContent = vat.toFixed(2);
      }

      // coupon demo
      document.getElementById('apply-coupon').addEventListener('click',()=>{
        const c = document.getElementById('coupon').value.trim();
        if(!c) return;
        alert('Gutschein angewendet (Demo).');
      });

      // buy
      document.getElementById('buy').addEventListener('click',()=>{
        alert('✅ Vielen Dank für Ihre Bestellung! (Demo)');
        if (window.cart) cart.clearCart();
        setTimeout(()=>location.href='index.html',500);
      });

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', loadSummary);
      } else {
        setTimeout(loadSummary, 80);
      }
    </script>
  </body>
</html>
